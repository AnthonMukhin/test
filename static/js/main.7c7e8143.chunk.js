(this["webpackJsonpsimple-piskel-clone"]=this["webpackJsonpsimple-piskel-clone"]||[]).push([[0],{40:function(e,t,a){e.exports=a.p+"static/media/full-screen.b26a844e.svg"},43:function(e,t,a){e.exports=a.p+"static/media/screen.d6dca46b.jpg"},44:function(e,t,a){e.exports=a.p+"static/media/animation1.c8d39763.gif"},45:function(e,t,a){e.exports=a.p+"static/media/animation2.858d709c.gif"},46:function(e,t,a){e.exports=a.p+"static/media/animation3.0e6b19d8.gif"},47:function(e,t,a){e.exports=a.p+"static/media/animation4.e84dc22e.gif"},48:function(e,t,a){e.exports=a.p+"static/media/animation5.ff97186e.gif"},50:function(e,t,a){e.exports=a(98)},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(0),i=a.n(r),c=a(20),o=a.n(c),l=a(22),s=a(3),u=a(25),m=function(e){return e.slice(0,3).reduce((function(e,t){return"".concat(e).concat(function(e){var t=e.toString(16);return 1===t.length?"0".concat(t):t}(t))}),"#")},f=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),t[4]?parseInt(t[4],16):255]:null},d=function(e,t,a,n){return{x:Math.floor((e-n.x)/a),y:Math.floor((t-n.y)/a)}},v=function(e,t){return e.x===t.x&&e.y===t.y},p=function(e,t){var a,n,r,i,c,o,l,s=e.x,u=e.y,m=t.x,f=t.y,d=[],v=m-s,p=f-u,h=Math.abs(v),g=Math.abs(p);if(r=2*g-h,i=2*h-g,g<=h)for(v>=0?(a=s,n=u,c=m):(a=m,n=f,c=s),d.push({x:a,y:n}),l=0;a<c;l+=1)a+=1,r<0?r+=2*g:(v<0&&p<0||v>0&&p>0?n+=1:n-=1,r+=2*(g-h)),d.push({x:a,y:n});else for(p>=0?(a=s,n=u,o=f):(a=m,n=f,o=u),d.push({x:a,y:n}),l=0;n<o;l+=1)n+=1,i<=0?i+=2*h:(v<0&&p<0||v>0&&p>0?a+=1:a-=1,i+=2*(h-g)),d.push({x:a,y:n});return d},h=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.forEach((function(t){var n=t.x,r=t.y;e.fillRect(n,r,a,a)}))},g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.forEach((function(t){var n=t.x,r=t.y;e.clearRect(n,r,a,a)}))},b=function(e,t,a){var n=t.x,r=4*(t.y*a+n);return e.slice(r,r+4)},_=function(e){var t=document.createElement("canvas");t.width=e,t.height=e;return t.getContext("2d").getImageData(0,0,e,e)},E=function(e){var t=null;return{clear:function(){t&&clearInterval(t)},start:function(a){t=setInterval(e,a)}}},C=function(e,t){e.clearRect(0,0,t,t)},y=function(e,t,a){e.putImageData(t,0,0,0,0,a,a)},O={isOpenFullscreen:!1,currentTool:"",penSize:1,mainColor:[0,255,0,255],secondColor:[255,128,64,255],canvas:{width:640,height:640,size:64,pixelSize:10},frameRate:0,currentFrame:0,frames:[_(64)]};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k,N=a(16),j=function(e,t){switch(t.type){case"CHANGE_CURRENT_TOOL":return Object(n.a)({},e,{currentTool:t.payload});case"SET_PEN_SIZE":return Object(n.a)({},e,{penSize:t.payload});case"SET_MAIN_COLOR":return Object(n.a)({},e,{mainColor:t.payload});case"SET_SECOND_COLOR":return Object(n.a)({},e,{secondColor:t.payload});case"SWAP_COLORS":var a=e.mainColor,r=e.secondColor;return Object(n.a)({},e,{mainColor:r,secondColor:a});case"SET_CANVAS_STATE":var i=t.payload.canvasState,c=e.frames,o=e.currentFrame;return Object(n.a)({},e,{frames:[].concat(Object(N.a)(c.slice(0,o)),[i],Object(N.a)(c.slice(o+1)))});case"ADD_FRAME":var l=e.frames,s=e.currentFrame;return Object(n.a)({},e,{frames:[].concat(Object(N.a)(l.slice(0,s+1)),[t.payload],Object(N.a)(l.slice(s+1))),currentFrame:e.currentFrame+1});case"SET_CURRENT_FRAME":return Object(n.a)({},e,{currentFrame:t.payload});case"DELETE_FRAME":var u=e.frames,m=e.currentFrame,f=t.payload,d=f===u.length-1||m===u.length-1?m-1:m;return Object(n.a)({},e,{frames:[].concat(Object(N.a)(u.slice(0,f)),Object(N.a)(u.slice(f+1))),currentFrame:d});case"COPY_FRAME":var v=e.frames,p=e.currentFrame,h=t.payload,g=function(e){var t=e.width,a=e.height,n=e.data.slice();return new ImageData(n,t,a)}(v[h]);return Object(n.a)({},e,{frames:[].concat(Object(N.a)(v.slice(0,h+1)),[g],Object(N.a)(v.slice(h+1))),currentFrame:p+1});case"SET_FRAME_RATE":return Object(n.a)({},e,{frameRate:t.payload});case"TOGGLE_PREVIEW_FULLSCREEN":return Object(n.a)({},e,{isOpenFullscreen:t.payload});case"SET_SIZE":var b=e.canvas,E=_(t.payload),C=b.width/t.payload,y=Object(n.a)({},b,{pixelSize:C,size:t.payload});return Object(n.a)({},e,{canvas:y,frames:[E],currentFrame:0});case"SWAP_FRAME":var O=e.frames,k=t.payload,j=k.index1,w=k.index2,x=O[j],S=O[w],F=O.slice();return F[j]=S,F[w]=x,Object(n.a)({},e,{frames:F});default:return e}},w=a(24),x=a(18),S=a(4),F=a(5),R=a(8),z=a(6),A=a(2),D=a(7),L=a(30),M=(a(59),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).state={isAuth:!1},e.responseGoogle=e.responseGoogle.bind(Object(A.a)(e)),e.logout=e.logout.bind(Object(A.a)(e)),e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"responseGoogle",value:function(e){var t=e.profileObj.name;this.setState({isAuth:!0,user:t})}},{key:"logout",value:function(){this.setState({isAuth:!1,user:null})}},{key:"button",value:function(){return this.state.isAuth?i.a.createElement(L.GoogleLogout,{clientId:"658977310896-knrl3gka66fldh83dao2rhgbblmd4un9.apps.googleusercontent.com",render:function(e){return i.a.createElement("button",{className:"log-in__button",type:"button",onClick:e.onClick,disabled:e.disabled},"Logout")},buttonText:"Logout",onLogoutSuccess:this.logout}):i.a.createElement(L.GoogleLogin,{clientId:"1061474256431-6qldlm69r49185q3g8avapt2oucv817t.apps.googleusercontent.com",render:function(e){return i.a.createElement("button",{className:"log-in__button",type:"button",onClick:e.onClick,disabled:e.disabled},"Login")},buttonText:"Login",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"})}},{key:"render",value:function(){var e=this.state.user;return i.a.createElement("div",{className:"log-in"},i.a.createElement("p",{className:"log-in__user"},null!==e?e:""),this.button())}}]),t}(r.Component)),T=(a(60),function(){return i.a.createElement("header",{className:"header"},i.a.createElement("div",{className:"header__body"},i.a.createElement("a",{className:"header__link",href:"/"},"Piskel-clone"),i.a.createElement(M,null)))}),I=function(e){return{type:"SET_MAIN_COLOR",payload:e}},P=function(e){return{type:"TOGGLE_PREVIEW_FULLSCREEN",payload:e}},G=function(e){var t=e.tool,a=e.clickTool,n=e.isActive;return i.a.createElement("button",{type:"button",className:"tool tool--".concat(t.name," ").concat(n?"tool--active":""),onClick:a})},U=(a(61),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).tools=[{name:"pen",key:"p",label:"Pen tool"},{name:"line",key:"l",label:"Stroke tool"},{name:"fill",key:"b",label:"Paint backet tool"},{name:"fill-all",key:"f",label:"Paint all pixels"},{name:"eraser",key:"e",label:"Erser tool"},{name:"pipette",key:"c",label:"Color picker"}],e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"clickHandle",value:function(e){(0,this.props.setCurrentTool)(e)}},{key:"render",value:function(){var e=this,t=this.props.currentTool,a=this.tools.map((function(a,n){return i.a.createElement("li",{key:n,className:"tool-bar__item"},i.a.createElement(G,{tool:a,isActive:a.name===t,clickTool:function(){e.clickHandle(a.name)}}))}));return i.a.createElement("div",{className:"tool-bar"},i.a.createElement("ul",{className:"tool-bar__list"},a))}}]),t}(r.Component)),B=Object(s.b)((function(e){return{currentTool:e.currentTool}}),{setCurrentTool:function(e){return{type:"CHANGE_CURRENT_TOOL",payload:e}}})(U),Y=(a(62),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).handleChangeMainColor=e.handleChangeMainColor.bind(Object(A.a)(e)),e.handleChangeSecondColor=e.handleChangeSecondColor.bind(Object(A.a)(e)),e.handleClick=e.handleClick.bind(Object(A.a)(e)),e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"handleChangeMainColor",value:function(e){var t=this.props.setMainColor,a=e.currentTarget;t(f(a.value))}},{key:"handleChangeSecondColor",value:function(e){var t=this.props.setSecondColor,a=e.currentTarget;t(f(a.value))}},{key:"handleClick",value:function(){(0,this.props.swapColors)()}},{key:"render",value:function(){var e=this.props,t=e.mainColor,a=e.secondColor;return i.a.createElement("div",{className:"color-bar"},i.a.createElement("input",{className:"color-bar__main-color",type:"color",value:m(t),onChange:this.handleChangeMainColor}),i.a.createElement("input",{className:"color-bar__second-color",type:"color",value:m(a),onChange:this.handleChangeSecondColor}),i.a.createElement("button",{type:"button",className:"color-bar__button",onClick:this.handleClick}))}}]),t}(r.Component)),W={setMainColor:I,setSecondColor:function(e){return{type:"SET_SECOND_COLOR",payload:e}},swapColors:function(){return{type:"SWAP_COLORS"}}},X=Object(s.b)((function(e){return{mainColor:e.mainColor,secondColor:e.secondColor}}),W)(Y),q=(a(63),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).penSizes=[1,2,3,4],e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.penSizes,t=this.props,a=t.penSize,n=t.setPenSize,r=e.map((function(e,t){return i.a.createElement("li",{key:t,className:"pen-size-panel__item"},i.a.createElement("button",{type:"button",className:"pen-size-panel__button ".concat(e===a?"pen-size-panel__button--active":""),onClick:function(){n(e)}},e))}));return i.a.createElement("div",{className:"pen-size-panel"},i.a.createElement("ul",{className:"pen-size-panel__list"},r))}}]),t}(r.Component)),H=Object(s.b)((function(e){return{penSize:e.penSize}}),{setPenSize:function(e){return{type:"SET_PEN_SIZE",payload:e}}})(q),J=function(e,t,a,n,r,i){var c=n.pixelSize,o=n.size,l=t,s=l;h(e,[l],i);var u=function(t){var n=t.pageX,r=t.pageY;if(l=d(n,r,c,a),!v(l,s)){var o=p(s,l);h(e,o,i),s=l}};document.addEventListener("mousemove",u),document.addEventListener("mouseup",(function t(){r({canvasState:e.getImageData(0,0,o,o)}),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",t)}))},V=function(e,t,a,n,r,i,c){var o=r.pixelSize,l=r.size,s=a,u=s;h(t,[s],c);var m=[],f=function(e){var r=e.pageX,i=e.pageY;s=d(r,i,o,n),v(s,u)||(t.clearRect(0,0,l,l),m=p(a,s),h(t,m,c),u=s)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",(function a(){t.clearRect(0,0,l,l),h(e,m,c),i({canvasState:e.getImageData(0,0,l,l)}),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",a)}))},Z=function(e,t,a,n,r,i){var c=n.pixelSize,o=n.size,l=t,s=l;g(e,[l],i);var u=function(t){var n=t.pageX,r=t.pageY;if(l=d(n,r,c,a),!v(l,s)){var o=p(s,l);g(e,o,i),s=l}};document.addEventListener("mousemove",u),document.addEventListener("mouseup",(function t(){r({canvasState:e.getImageData(0,0,o,o)}),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",t)}))},$=function(e,t,a,n){var r=a.size,i=e.getImageData(0,0,r,r).data,c=b(i,t,a.size);c.every((function(e){return 0===e}))||n(Array.from(c))},K=function(e,t,a,n,r){var i=a.size,c=e.getImageData(0,0,i,i).data,o=b(c,t,a.size);if(o!==r){var l=function(e,t,a){for(var n=e.slice(),r=0;r<n.length;r+=4){if(n[r]===t[0]&&n[r+1]===t[1]&&n[r+2]===t[2]&&n[r+3]===t[3]){var i=Object(u.a)(a,4),c=i[0],o=i[1],l=i[2],s=i[3];n[r]=c,n[r+1]=o,n[r+2]=l,n[r+3]=s}}return n}(c,o,r),s=new ImageData(l,i,i);e.putImageData(s,0,0,0,0,i,i),n({canvasState:s})}},Q=function(e,t,a,n,r){var i=a.size,c=e.getImageData(0,0,i,i).data,o=b(c,t,a.size);if(o!==r){var l=function(e,t,a,n,r){for(var i=e.slice(),c=Object(u.a)(r,3),o=c[0],l=c[1],s=c[2],m=[[a.y,a.x]],f=function(e){var t=i[e],a=i[e+1],r=i[e+2];return t===n[0]&&a===n[1]&&r===n[2]},d=function(e){i[e]=o,i[e+1]=l,i[e+2]=s,i[e+3]=255};m.length;){var v,p=void 0,h=void 0,g=void 0,b=void 0,_=m.pop(),E=Object(u.a)(_,2);for(b=4*((p=E[0])*t+(v=E[1]));p>=0&&f(b);)b-=4*t,p-=1;for(b+=4*t,p+=1,h=!1,g=!1;p<t&&f(b);)d(b),v>0&&(f(b-4)?h||(m.push([p,v-1]),h=!0):h&&(h=!1)),v<t-1&&(f(b+4)?g||(m.push([p,v+1]),g=!0):g&&(g=!1)),p+=1,b+=4*t}return i}(c,i,t,o,r),s=new ImageData(l,i,i);e.putImageData(s,0,0,0,0,i,i),n({canvasState:s})}},ee=(a(64),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).mainCanvasRef=i.a.createRef(),e.drawingCanvasRef=i.a.createRef(),e.mainCanvas=null,e.drawingCanvas=null,e.mainContext=null,e.drawingContext=null,e.screen=null,e.handleMouseDown=e.handleMouseDown.bind(Object(A.a)(e)),e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentFrame,a=e.frames,n=e.canvas.size;this.mainCanvas=this.mainCanvasRef.current,this.mainContext=this.mainCanvas.getContext("2d"),this.drawingCanvas=this.drawingCanvasRef.current,this.drawingContext=this.drawingCanvas.getContext("2d"),y(this.mainContext,a[t],n)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=t.currentFrame,n=t.frames,r=t.canvas,i=e.currentFrame,c=e.frames,o=e.canvas;return a!==i||n.length!==c.length||r!==o}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.frames,a=e.currentFrame,n=e.canvas.size,r=t[a];C(this.mainContext,n),r&&y(this.mainContext,r,n)}},{key:"handleMouseDown",value:function(e){var t=this.props,a=t.mainColor,n=t.currentTool,r=t.canvas,i=t.setCanvasState,c=t.penSize,o=t.setMainColor,l=t.secondColor;if(e.preventDefault(),""!==n){var s=e.pageX,u=e.pageY,f=this.mainCanvas.getBoundingClientRect(),v=2===e.button?l:a;this.mainContext.fillStyle=m(v),this.drawingContext.fillStyle=m(v);var p=d(s,u,r.pixelSize,f);switch(n){case"pen":J(this.mainContext,p,f,r,i,c);break;case"line":V(this.mainContext,this.drawingContext,p,f,r,i,c);break;case"eraser":Z(this.mainContext,p,f,r,i,c);break;case"pipette":$(this.mainContext,p,r,o);break;case"fill-all":K(this.mainContext,p,r,i,v);break;case"fill":Q(this.mainContext,p,r,i,v)}}}},{key:"render",value:function(){var e=this.props.canvas.size;return(i.a.createElement("div",{className:"canvas",id:"screen",onMouseDown:this.handleMouseDown,ref:this.myRef,onContextMenu:function(e){return e.preventDefault()}},i.a.createElement("canvas",{className:"canvas__main",ref:this.mainCanvasRef,width:e,height:e}),i.a.createElement("canvas",{className:"canvas__drawing",ref:this.drawingCanvasRef,width:e,height:e}),i.a.createElement("div",{className:"canvas__background"})))}}]),t}(r.Component)),te={setCanvasState:function(e){return{type:"SET_CANVAS_STATE",payload:e}},setMainColor:I},ae=Object(s.b)((function(e){return{mainColor:e.mainColor,currentTool:e.currentTool,canvas:e.canvas,currentFrame:e.currentFrame,frames:e.frames,penSize:e.penSize,secondColor:e.secondColor}}),te)(ee),ne=(a(65),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).myRef=i.a.createRef(),e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.image,a=e.size;if(t){var n=this.myRef.current.getContext("2d");y(n,t,a)}}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.image,a=e.size;if(t){var n=this.myRef.current.getContext("2d");y(n,t,a)}}},{key:"render",value:function(){var e=this.props,t=e.currentFrame,a=e.length,n=e.index,r=e.size,c=e.onDelete,o=e.onChange,l=e.onCopy;return i.a.createElement("div",{className:"frame ".concat(t===n&&"frame--active")},i.a.createElement("button",{className:"frame__body",type:"button",onClick:function(){return o(n)}},i.a.createElement("canvas",{className:"frame__canvas",id:"canvas",width:r,height:r,ref:this.myRef})),i.a.createElement("p",{className:"frame__index"},n+1),a>1&&i.a.createElement("button",{type:"button",className:"frame__button frame__button--delete",onClick:function(){return c(n)}}),i.a.createElement("button",{type:"button",className:"frame__button frame__button--copy",onClick:function(){return l(n)}}))}}]),t}(r.Component)),re=(a(66),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).handleClick=e.handleClick.bind(Object(A.a)(e)),e.handleMouseDown=e.handleMouseDown.bind(Object(A.a)(e)),e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.addFrame,a=e.canvas.size;t(_(a))}},{key:"handleMouseDown",value:function(e){var t=this.props.swapFrame,a=e.target.parentNode;a.style.zIndex="9999";var n=+a.dataset.index,r=e.pageY,i=function(e){a.style.transform="translateY(".concat(e.pageY-r,"px)")};document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(r){a.hidden=!0;var c=document.elementFromPoint(r.clientX,r.clientY);for(a.hidden=!1;c.classList;){if(c.classList.contains("frames__drag")){var o=+c.dataset.index;o!==n&&t(n,o);break}c=c.parentNode}a.style.transform="translateY(0px)",a.style.zIndex="1",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.frames,n=t.canvas.size,r=t.currentFrame,c=t.setCurrentFrame,o=t.deleteFrame,l=t.copyFrame,s=a.map((function(t,s){return i.a.createElement("li",{className:"frames__item",key:s},i.a.createElement("div",{className:"frames__drag",onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,"data-index":s},i.a.createElement(ne,{size:n,currentFrame:r,length:a.length,index:s,image:t,onDelete:o,onChange:c,onCopy:l}),i.a.createElement("button",{className:"frames__drag-button",type:"button",onMouseDown:e.handleMouseDown})))}));return i.a.createElement("div",{className:"frames"},i.a.createElement("ul",{className:"frames__list"},s),i.a.createElement("button",{type:"button",className:"frames__button",onClick:this.handleClick},"Add new frame"))}}]),t}(r.Component)),ie={addFrame:function(e){return{type:"ADD_FRAME",payload:e}},setCurrentFrame:function(e){return{type:"SET_CURRENT_FRAME",payload:e}},deleteFrame:function(e){return{type:"DELETE_FRAME",payload:e}},copyFrame:function(e){return{type:"COPY_FRAME",payload:e}},swapFrame:function(e,t){return{type:"SWAP_FRAME",payload:{index1:e,index2:t}}}},ce=Object(s.b)((function(e){return{frames:e.frames,currentFrame:e.currentFrame,canvas:e.canvas}}),ie)(re),oe=(a(67),a(40)),le=a.n(oe),se=function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).canvasRef=i.a.createRef(),e.context=null,e.handleChange=e.handleChange.bind(Object(A.a)(e)),e.handleClick=e.handleClick.bind(Object(A.a)(e)),e.showAnimation=e.showAnimation.bind(Object(A.a)(e)),e.previewInterval=E(e.showAnimation),e.activeFrame=0,e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.frames,a=e.currentFrame,n=e.size;this.context=this.canvasRef.current.getContext("2d"),y(this.context,t[a],n)}},{key:"componentDidUpdate",value:function(e){var t=this.props.frameRate;if(t!==e.frameRate)if(this.previewInterval.clear(),0!==t){var a=1e3/t;this.previewInterval.start(a)}else this.drawFrame();this.drawFrame()}},{key:"showAnimation",value:function(){var e=this.props,t=e.frames,a=e.size,n=t.length,r=t[this.activeFrame],i=this.canvasRef.current.getContext("2d");C(i,a),r&&y(i,r,a),this.activeFrame=(this.activeFrame+1+n)%n}},{key:"drawFrame",value:function(){var e=this.props,t=e.frames,a=e.currentFrame,n=e.size,r=this.canvasRef.current.getContext("2d"),i=t[a];C(r,n),i&&y(r,i,n)}},{key:"handleChange",value:function(e){(0,this.props.setFrameRate)(+e.target.value)}},{key:"handleClick",value:function(){(0,this.props.togglePreviewFullscreen)(!0)}},{key:"render",value:function(){var e=this.props,t=e.frameRate,a=e.size;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"preview"},i.a.createElement("canvas",{className:"preview__canvas",width:a,height:a,ref:this.canvasRef}),i.a.createElement("div",{className:"preview__background"}),i.a.createElement("button",{className:"preview__button",type:"button",onClick:this.handleClick},i.a.createElement("img",{className:"preview__icon",src:le.a,alt:"full-screen"})),i.a.createElement("div",{className:"preview__control"},i.a.createElement("p",{className:"preview__value"},t),i.a.createElement("input",{type:"range",value:t,min:"0",max:"24",step:"1",onChange:this.handleChange}))))}}]),t}(r.Component),ue={setFrameRate:function(e){return{type:"SET_FRAME_RATE",payload:e}},togglePreviewFullscreen:P},me=Object(s.b)((function(e){return{frames:e.frames,frameRate:e.frameRate,currentFrame:e.currentFrame,size:e.canvas.size}}),ue)(se),fe=(a(68),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).canvasRef=i.a.createRef(),e.fullScrennRef=i.a.createRef(),e.context=null,e.showAnimation=e.showAnimation.bind(Object(A.a)(e)),e.handleFullScreenChange=e.handleFullScreenChange.bind(Object(A.a)(e)),e.previewInterval=E(e.showAnimation),e.activeFrame=0,e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this.context=this.canvasRef.current.getContext("2d"),document.addEventListener("fullscreenchange",this.handleFullScreenChange)}},{key:"componentDidUpdate",value:function(){if(this.props.isOpenFullscreen){this.fullScrennRef.current.requestFullscreen();var e=this.props.frameRate;if(0!==e){var t=1e3/e;this.previewInterval.start(t)}else this.drawFrame()}}},{key:"handleFullScreenChange",value:function(){if(!document.fullscreenElement){var e=this.props.togglePreviewFullscreen;this.previewInterval.clear(),e(!1)}}},{key:"showAnimation",value:function(){var e=this.props,t=e.frames,a=e.canvas.size,n=t.length,r=t[this.activeFrame],i=this.canvasRef.current.getContext("2d");C(i,a),r&&y(i,r,a),this.activeFrame=(this.activeFrame+1+n)%n}},{key:"drawFrame",value:function(){var e=this.props,t=e.frames,a=e.currentFrame,n=e.canvas.size,r=this.canvasRef.current.getContext("2d"),i=t[a];C(r,n),i&&y(r,i,n)}},{key:"render",value:function(){var e=this.props,t=e.canvas.size,a=e.isOpenFullscreen;return i.a.createElement("div",{className:"preview-fullscreen ".concat(a?"preview-fullscreen--active":""),ref:this.fullScrennRef},i.a.createElement("div",{className:"preview-fullscreen__body"},i.a.createElement("canvas",{className:"preview-fullscreen__canvas",width:t,height:t,ref:this.canvasRef}),i.a.createElement("div",{className:"preview-fullscreen__background"})))}}]),t}(r.Component)),de={togglePreviewFullscreen:P},ve=Object(s.b)((function(e){return{frames:e.frames,frameRate:e.frameRate,currentFrame:e.currentFrame,canvas:e.canvas,isOpenFullscreen:e.isOpenFullscreen}}),de)(fe),pe=a(23),he=a.n(pe),ge=a(41),be=a.n(ge),_e=function(e,t){var a=document.createElement("canvas");a.height=t,a.width=t;var n=a.getContext("2d");return e.map((function(e){return C(n,t),y(n,e,t),a.toDataURL()}))},Ee=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"animation",r=_e(e,t),i=new be.a({workers:2,quality:10,background:"#ffffff",width:t,height:t});r.forEach((function(e){var n=new Image(t,t);n.src=e,i.addFrame(n,{delay:a})})),i.on("finished",(function(e){he()(e,"".concat(n))})),i.render()},Ce=a(42),ye=a.n(Ce),Oe=function(e,t){var a=document.createElement("canvas");a.height=t,a.width=t;var n=a.getContext("2d");return e.map((function(e){return C(n,t),y(n,e,t),n.getImageData(0,0,t,t).data.buffer}))},ke=function(e,t){return e.map((function(){return 1e3*t}))},Ne=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"animation",r=Oe(e,t),i=ke(e,a),c=ye.a.encode(r,t,t,0,i);he()(c,"".concat(n,".apng"))},je=(a(89),function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(R.a)(this,Object(z.a)(t).call(this))).state={value:"New Piskel"},e.handleClickOnGifButton=e.handleClickOnGifButton.bind(Object(A.a)(e)),e.handleClickOnApngButton=e.handleClickOnApngButton.bind(Object(A.a)(e)),e.handleChange=e.handleChange.bind(Object(A.a)(e)),e}return Object(D.a)(t,e),Object(F.a)(t,[{key:"handleClickOnGifButton",value:function(){var e=this.props,t=e.frames,a=e.size,n=e.frameRate,r=this.state.value;Ee(t,a,n,r)}},{key:"handleClickOnApngButton",value:function(){var e=this.props,t=e.frames,a=e.size,n=e.frameRate,r=this.state.value;Ne(t,a,n,r)}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this.state.value;return i.a.createElement("div",{className:"export-menu"},i.a.createElement("p",{className:"export-menu__title"},"Export as:"),i.a.createElement("input",{className:"export-menu__input",type:"text",value:e,onChange:this.handleChange}),i.a.createElement("div",{className:"export-menu__button-group"},i.a.createElement("button",{className:"export-menu__button",type:"button",onClick:this.handleClickOnGifButton},"gif"),i.a.createElement("button",{className:"export-menu__button",type:"button",onClick:this.handleClickOnApngButton},"apng")))}}]),t}(r.Component)),we=Object(s.b)((function(e){return{frames:e.frames,frameRate:e.frameRate,size:e.canvas.size}}))(je),xe=(a(90),function(e){var t=e.handleClick,a=e.children,n=e.isActive,r=void 0!==n&&n;return i.a.createElement("button",{className:"button ".concat(r?"button--active":""),type:"button",onClick:t},a)}),Se=(a(91),32),Fe=64,Re=128,ze={setSize:function(e){return{type:"SET_SIZE",payload:e}}},Ae=Object(s.b)((function(e){return{size:e.canvas.size}}),ze)((function(e){var t=e.size,a=e.setSize;return i.a.createElement("div",{className:"resize-menu"},i.a.createElement(xe,{isActive:t===Se,handleClick:function(){return a(Se)}},"32"),i.a.createElement(xe,{isActive:t===Fe,handleClick:function(){return a(Fe)}},"64"),i.a.createElement(xe,{isActive:t===Re,handleClick:function(){return a(Re)}},"128"))})),De=(a(92),Object(s.b)((function(e){return e}))((function(e){return i.a.createElement("div",{className:"save-menu"},i.a.createElement("button",{className:"save-menu__button",type:"button",onClick:function(){var t,a=e.frames,r=JSON.stringify(Object(n.a)({},e,{frames:(t=a,t.map((function(e){var t=e.width,a=e.height,n=e.data;return{width:t,height:a,data:Array.from(n)}})))}));localStorage.setItem("piskelclone",r)}},"Save"),i.a.createElement("button",{className:"save-menu__button",type:"button",onClick:function(){localStorage.removeItem("piskelclone")}},"Delete save"))}))),Le=(a(93),function(){return i.a.createElement("main",{className:"main"},i.a.createElement("div",{className:"main__left-menu"},i.a.createElement(H,null),i.a.createElement(B,null),i.a.createElement(X,null)),i.a.createElement("div",{className:"main__frames"},i.a.createElement(ce,null)),i.a.createElement("div",{className:"main__canvas"},i.a.createElement(ae,null)),i.a.createElement("div",{className:"main__right-menu"},i.a.createElement(me,null),i.a.createElement(ve,null),i.a.createElement(we,null),i.a.createElement(Ae,null),i.a.createElement(De,null)))}),Me=a(43),Te=a.n(Me),Ie=a(44),Pe=a.n(Ie),Ge=a(45),Ue=a.n(Ge),Be=a(46),Ye=a.n(Be),We=a(47),Xe=a.n(We),qe=a(48),He=a.n(qe),Je=(a(94),function(){return i.a.createElement("main",{className:"landing-page"},i.a.createElement("div",{className:"landing-page__wrap"},i.a.createElement("div",{className:"landing-page__preview"},i.a.createElement("div",{className:"landing-page__info"},i.a.createElement("h1",{className:"landing-page__title"},"Piskel is a free online editor for animated sprites & pixel art"),i.a.createElement(w.b,{to:"/create",className:"landing-page__button"},"Create Sprite")),i.a.createElement("img",{className:"landing-page__screen",src:Te.a,alt:"piskel-clone"})),i.a.createElement("div",{className:"landing-page__animation animation"},i.a.createElement("div",null,i.a.createElement("p",{className:"animation__title"},"Animation examples"),i.a.createElement("ul",{className:"animation__list"},i.a.createElement("li",{className:"animation__item"},i.a.createElement("img",{className:"animation__image",src:Pe.a,alt:"animation"})),i.a.createElement("li",{className:"animation__item"},i.a.createElement("img",{className:"animation__image",src:Ue.a,alt:"animation"})),i.a.createElement("li",{className:"animation__item"},i.a.createElement("img",{className:"animation__image",src:Ye.a,alt:"animation"})),i.a.createElement("li",{className:"animation__item"},i.a.createElement("img",{className:"animation__image",src:Xe.a,alt:"animation"})),i.a.createElement("li",{className:"animation__item"},i.a.createElement("img",{className:"animation__image",src:He.a,alt:"animation"}))))),i.a.createElement("div",{className:"landing-page__functionality"},i.a.createElement("div",null,i.a.createElement("p",{className:"functionality__title"},"Available functionality"),i.a.createElement("ul",{className:"functionality__list"},i.a.createElement("li",{className:"functionality__item functionality__item--tools"},"Support 6 tools"),i.a.createElement("li",{className:"functionality__item functionality__item--maximize"},"Support three canvas size"),i.a.createElement("li",{className:"functionality__item functionality__item--export"},"Export as GIF and APNG"),i.a.createElement("li",{className:"functionality__item functionality__item--google"},"Google authentication"),i.a.createElement("li",{className:"functionality__item functionality__item--preview"},"Live preview"),i.a.createElement("li",{className:"functionality__item functionality__item--save"},"Saving session")))),i.a.createElement("p",{className:"landing-page__copyright"},"\xa9 Copyright 2019 by Mukhin Anton")))}),Ve=(a(96),function(){return i.a.createElement(w.a,null,i.a.createElement("div",{className:"App"},i.a.createElement(T,null),i.a.createElement(x.c,null,i.a.createElement(x.a,{path:"/create"},i.a.createElement(Le,null)),i.a.createElement(x.a,{path:"/"},i.a.createElement(Je,null)))))}),Ze=(a(97),JSON.parse(localStorage.getItem("piskelclone"))),$e=Ze?Object(n.a)({},Ze,{frames:(k=Ze.frames,k.map((function(e){var t=e.width,a=e.height,n=e.data,r=Uint8ClampedArray.from(n);return new ImageData(r,t,a)})))}):O,Ke=Object(l.b)(j,$e),Qe=document.getElementById("root");o.a.render(i.a.createElement(s.a,{store:Ke},i.a.createElement(Ve,null)),Qe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[50,1,2]]]);
//# sourceMappingURL=main.7c7e8143.chunk.js.map